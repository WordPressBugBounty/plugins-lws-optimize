=== LWS Optimize ===
Contributors: aurelienlws
Tags: LWS, admin, optimisation, cache
Requires at least: 6.0
Tested up to: 6.8
Stable tag: 3.3.2
Requires PHP: 7.4
Author : LWS
Author URI: https://www.lws.fr/
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

Optimize and modify your website's parameters

== License ==

Released under the terms of the GNU General Public License.

== Description ==

A fully-featured, **100 % free** performance suite built by web host **LWS** – yet installable on **any** WordPress site.

**LWS Optimize** speeds up WordPress with a single free plugin: page / object / server caching, WebP-AVIF images, Critical CSS, Lazy Load, Cloudflare CDN, built-in PageSpeed tests… all with zero licence fees and no host lock-in.

**Highlights**

* **Page & browser cache + server cache (Varnish)** – pages served in milliseconds  
* **Object cache (Memcached)** – keep frequent MySQL queries in RAM  
* **Smart media** – Lazy Load images/iframes, auto dimensions, GZIP, WebP/AVIF (100 credits / month), class/URL exclusions  
* **CSS / JS toolkit** – Minify, Combine, *Remove Unused CSS*, Critical CSS, Preload CSS & Fonts, Defer / Delay JS  
* **HTML & bloat** – Minify HTML, strip query strings, disable emojis  
* **Cloudflare CDN (1 click)** – token activation, synced cache-purge, conflict-safe defaults  
* **Google PageSpeed Insights inside WP** – run tests and store history  
* **Lightweight database** – scheduled cleanup (revisions, spam, transients…)  
* **Beginner-friendly dashboard** – pre-configured profiles, temporary disable (5 min → 1 day), “AI Magic” presets


Through our 1-click **Auto-Installer**, LWS deploys WordPress in seconds — choose from tailored packs like the AI Site Generator, Divi Builder bundle, or WordPress + WooCommerce setup.  
Each pack comes with essential LWS plugins pre-selected — including **LWS Optimize**, which works even faster on our [WordPress hosting](https://www.lws.fr/hebergement_wordpress.php), [classic shared hosting](https://www.lws.fr/hebergement_web.php), and [cPanel hosting](https://www.lws.fr/hebergement-cpanel.php).  
You can also install it manually at any time via Plugins › Add New, no matter where your site is hosted.


= Front-end optimization =  
* Minify / combine CSS & JS  
* Preload CSS + fonts  
* Remove unused CSS & generate Critical CSS  
* Defer **or** Delay JS  
* Minify HTML  
* Strip query strings, disable emojis

= Media =  
* Lazy Load images, iframes & videos (class/URL exclusions)  
* Auto-add width/height attributes (CLS-safe)  
* GZIP HTML, CSS, JS  
* Control audio/video preload

= Images =  
* Auto convert & compress **WebP / AVIF** (Imagick or API)  
* 100 free credits / month, extra credits available (for API)
* Restore originals, auto-convert on upload

= Caching =  
* File page cache (smart purge, preload, .htaccess option)  
* Object cache **Memcached**  
* Server cache **Varnish / LWSCache** (on LWS hosting)  
* Browser-cache headers  
* Optional no-cache for mobiles, logged-in users & dynamic URLs

= CDN =  
* Cloudflare in one click  
* DDoS shield + worldwide POPs  
* Synced cache-purge

= Database =  
* Weekly automatic cleanup (revisions, drafts, spam, transients…)

= Performance test =  
* Google PageSpeed Insights inside WordPress  
* Score & timing history

Enjoy lightning-fast load times, better Core Web Vitals and higher SEO rankings – all without the hassle.


== Frequently Asked Questions ==

= <strong>Why optimize your WordPress site?</strong> =
Having a fast site without slowing down must be one of your priorities. A slow site does not please anyone, your visitors may leave it very quickly. A user will not wait more than a few seconds

= <strong>Does this plugin need any particular web hosting to work?</strong> =
This plugin can be used with all WordPress websites. However it was designed for LWS web hosting customers. Some features may be inaccessible to users of other servers. Apart from this plugin, LWS hosting offers you many other benefits: free domain, SSL certificate (https), pro emails based on your domain, low prices, premium WordPress themes and plugins...

If you want to host your WordPress site with LWS you can choose one of these solutions:

[WordPress hosting](https://www.lws.fr/hebergement_wordpress.php)
Classic shared [web hosting](https://www.lws.fr/hebergement_web.php)
[cPanel hosting](https://www.lws.fr/hebergement-cpanel.php)

= <strong>Do you have a valid promo code on recommended web hosting?</strong> =
Yes, you can enter the coupon code WPEXT15 at checkout (on [LWS](https://www.lws.fr/)) to receive an additional 15% discount (cumulative with current promotional offers!)

= <strong>Where can I get help?</strong> =
Find out more about LWS Optimize by searching for this keyword on our [LWS online help](https://aide.lws.fr/). A free 7 days / 7 support is also available in France when you have ordered a web hosting or other service from LWS. Videos are also published regularly on our [YouTube channel](https://www.youtube.com/c/LwsFrance).

= <strong>Do you have any other plugins to recommend?</strong> =
Other WordPress extensions have been created by LWS :

* <strong>[LWS Cleaner](https://wordpress.org/plugins/lws-cleaner/)</strong> : Helps you clean your website and giving it a second youth, fast and easily!
* <strong>[LWS Tools](https://wordpress.org/plugins/lws-tools/)</strong> : Get a hold on various tools and options to optimize your website. From deactivating emotes or hiding sensible informations to deactivating REST API!
* <strong>[LWS Hide Login](https://wordpress.org/plugins/lws-hide-login/)</strong> : Redirect your users if they try to access your admin page directly. Choose your own page and protect your website.
* <strong>[LWS Affiliation](https://wordpress.org/plugins/lws-affiliation/)</strong> : Easily add banners and widgets such as search domain name availability or a summary table of our web hosting plans on your website.
* <strong>[LWS SMS](https://wordpress.org/plugins/lws-sms/)</strong> : Create SMS templates and configurate your website to send SMS to clients when you want it ! Requires [ordering SMS credits](https://www.lws.fr/envoyer-sms-par-internet.php)
* <strong>[LWS Cache](https://wordpress.org/plugins/lwscache/)</strong> : This plugin works only on servers using the LWSCache system. This cache is pre-installed with shared web hosting , WordPress hosting, cPanel hosting from LWS.

= <strong>Useful LWS services to get you started on the web</strong> =
* [Domain name](https://www.lws.fr/nom-de-domaine.php)
* [WordPress hosting](https://www.lws.fr/hebergement_wordpress.php)
* Classic [Web hosting](https://www.lws.fr/hebergement_web.php)
* [cPanel hosting](https://www.lws.fr/hebergement-cpanel.php)
* [Reseller web hosting](https://www.lws.fr/hebergement_revendeur.php)
* [Woocommerce Hosting](https://www.lws.fr/hebergement-woocommerce.php)
* [VPS server](https://www.lws.fr/serveur_dedie_linux.php)
* [cPanel server](https://www.lws.fr/serveur-cpanel.php)
* [Cloud server](https://www.lws.fr/serveur_cloud.php)
* [Private Cloud](https://www.lws.fr/private_cloud.php)
* [Email addresses](https://www.lws.fr/adresses-email.php)
* [create a website easily](https://www.lws.fr/creer-un-site-internet.php)
* [Create a WordPress website](https://www.lws.fr/creer-un-site-wordpress.php)
* [Custom website creation](https://www.lws.fr/creation-site-sur-mesure.php)
* [Online store hosting](https://www.lws.fr/hebergement_e_commerce.php)
* [Web referencing](https://www.lws.fr/referencement.php)
* [Online storage](https://www.lws.fr/stockage-en-ligne.php)
* [Online backups](https://www.lws.fr/sauvegarde-en-ligne.php)
* [Send SMS by internet](https://www.lws.fr/envoyer-sms-par-internet.php)
* [Online help](https://aide.lws.fr/)
* [Tutorials](https://tutoriels.lws.fr/)
* [Blog](https://blog.lws-hosting.com/)
* [YouTube Videos](https://www.youtube.com/c/LwsFrance)


== Installation ==

There are 3 different ways to install LWS Optimize (as with any other wordpress.org plugin).

= Using the WordPress dashboard =

1. In WordPress, in the Extensions menu, click on "Add"
2. Search for the 'LWS Optimize' plugin
3. Click 'Install Now'
4. Activate the plugin

= Uploading in WordPress Dashboard =

1. Download the latest version of this [plugin](https://wordpress.org/plugins/lws-optimize/)
2. In WordPress, in the Extensions menu, click on "Add"
3. Click on the top button "Upload an extension"
4. Select the zip file from your computer (zip file from step 1.)
5. Click 'Install Now'
4. Activate the plugin

= Using FTP =

1. Download the latest version of this [plugin](https://wordpress.org/plugins/lws-optimize/)
2. Unzip the zip file. This extracts the files from the compressed folder on your computer
3. Upload the LWS Optimize folder to the /wp-content/plugins/ directory in your web space
4. Activate the plugin in WordPress

== Screenshots ==

1. Dashboard overview
2. Front-end settings (CSS/JS/HTML)  
3. Caching (File, Memcached, Varnish)  
4. Media optimizations (Lazy Load, GZIP)  
5. Image conversion (WebP/AVIF)  
6. CDN integration (Cloudflare)  
7. Database cleanup  
8. PageSpeed test results  

== Changelog ==

= 3.3.2 =
* Preloading inactive by default, reduced to 5 pages/minutes at first
* Cache for connected user active by default
* Autopurge now purge the home page 
* Cache is kept longer by default
* Removed potentially harmful functions

= 3.3.1.1 =
* Fixed issue where log_file could not be accessed, causing errors
* Fixed case where using the CLI to activate the plugin would return warnings in the terminal
* Minor bugs fixes

= 3.3.1 =
* Hotfix on the autopurge, which may in some rare cases purge all the cache instead of only the concerned page

= 3.3 =
* Added Unused CSS and Critical CSS management
* Added Differed JS and Delayed JS management
* Added option to add width and height attributes on images if not present
* Updated Image Conversion

= 3.2.4.3 =
* Edge-Cache-Platform header only added when on a cache file ; fix rare cases where it would get added when it should not
* Updated CSS combination to catch rare combination errors instead of bailling out of caching
* Better combination algorithm

= 3.2.4.2 =
* Fixed issue where dynamic cache would not be purged
* Fixed remaining issues with autopurge
* Small changes to how the "cache dynamic url" works
* Fixed broken exclusion system for the cache + "*" now correctly supported

= 3.2.4.1 =
* Fixed small issue where autopurge would not get purged when using Varnish Cache
* Fixed Fatal Error on update if LWSCache is activated

= 3.2.4 =
* Updated the preloading for better stability and performances
* Modified how the autopurge is triggered to be less prone to sudden, unwanted purges due to how the hooks are triggered
* Added some logging

= 3.2.3 = 
* Fixed issue where black screen on cache deletion would not take the whole page
* Fixed issue where clicking the topbar-menu would not redirect to the plugin settings but instead clear cache
* .htaccess caching will be deactivated whenever Optimize stops (due to other plugins, notably)
* Fixed dynamic page caching, which would always cache pages, no matter what
* Fixed URLs exclusion which would not save entered URLs

= 3.2.2.3 =
* Fix Warning when trying to modify an inaccessible .htaccess
* Fix bug where preloading would never stop if some of the URLs to preload were unavailable (404, 500, ...)

= 3.2.2.2 = 
* Added documentation
* Minor bug fix

= 3.2.2.1 =
* Minor interface update
* Rewording of some options
* Fix potential issues with the preloading not working on some websites


= 3.2.2 =
* Now using .htaccess for managing cache and redirections, resulting in better performances
* More strict caching, refusing to cache empty pages and pages with code != 200
* Bug fixes
* More options

= 3.2.1.5 =
* Fixed issue where cache would not get created if SSL plugins were on

= 3.2.1.4 =
* Better compatibility with Varnish/LiteSpeed for the dynamic cache
* Changed default state of the plugin to "OFF"
- Actions on (de)activation fixed
- Added expiration headers
- fix preload counter not being accurate
- fixed pre-load cron stopping
- added a way to manage dynamic pages (with parameters such as ?param=1)

= 3.2.1.3 =
* Fix minor issues with image convertion

= 3.2.1.2 =
* Fixed image conversion gained size
* Removed AVIF as it caused too many issues
* Minor changes to the Images tab
* Tab order rearranged
* Few bug fixes

= 3.2.1.1 =
* Updated the way images are changed on your website to make it less prone to bugs and easily deactivable by removing the plugin
* Fixed bugs
* Added mobile cache preloading

= 3.2.1 =
* New design for the "Images" page
* Bugfixes for the image conversion, especially the autoconvert and restoration
* Fixed mobile cache not getting created on cPanel with Varnish
* Better warnings when your website cannot use Image Conversion
* Updated for WordPress 6.7


= 3.2.0.6 =
* Few bug fixes
* Varnish can now be deleted
* Cache is now deleted more often when doing actions on the plugin

= 3.2.0.4 =
* Optimizations of the plugin to be more reactive
* Fix issue where CSS optimizations would not ignore fonts, deactivating them
* Fix issue with lazy-loading where images would not load up
* Some websites had an incorrect counter for preloaded pages that has now been fixed
* Caching stats should be more accurate

= 3.2.0.3 =
* Readded Memcached
* Fixed an issue with the database weekly maintenance where an SQL request could potentially remove all "pages" elements from the DB
* Minor CSS ameliorations

= 3.2 = 
* Image convertion greatly improved and changed to BETA
* Lazy-loading changed : now an active solution greatly improving performances
* Some change to the mobile cache, now activated by default
- Fixed issue with the GZIP deactivating
- Improved notification popup to take less space and be less intruive
* Code optimization
* Bug fixes

= 3.1.7.6 =
* Show stats for image convertion
* Fix revert convertion that was not working
* Added button to refresh data (preload, convertion)

= 3.1.7.4 =
* Update to the image convertion system

= 3.1.7.2 =
* Fixed issue with ImageOptimization already declared
* Fixed issue with preloading not preloading every pages
* Fixed issue with warning showing up on the admin

= 3.1.7.1 =
* Fixed issue where converting images would do it 10 per 10 no matter what
* Fixed issue with undefined properties if auto-convert has never been activated
* Fixed issue where auto-convert would always be considered activated

= 3.1.7 =
* Cache stats fixed and should now consume less resources
* Added the possibility to convert images to the format of your choice between WebP, AVIF, PNG and JPEG
* Fixed some issues


= 3.1.6.4 =
* Autopurge has been fixed and now works as intended
* The cache stats has been temporarily deactivated as it caused issues with a high volume of filecache

= 3.1.6.2 =
* Fixed issue where Memcached file (object-cache) would be added even though Memcached is not on the server
* Tuned the optimization to get more performances

= 3.1.6.1 =
* Missing image added back
* CDN documentation updated
* Fixed CSS not loading properly on some website

= 3.1.6 =
* Design change for the parameters
* Fixed an issue where emptying cache from the adminbar on the site would not work

= 3.1.5 =
* Added documentations for most of the options of the plugin
* Fixed missing translations
* Fixed texts
* Fixed issue where configuration would get erased when changin to a different pre-configuration

= 3.1.4 =
* Changed preloading (CSS/fonts) ; only preload given URLs instead of everything
* Upgraded the emoji support deactivation
* Now alert you if you use Cloudflare but do not have the integration activated
* Fixed an issue with CDN Integration where cache wouldn't get cleared

= 3.1.3 =
* Fixed a visual bug with PageSpeed's Device Select
* Limited to 1 test/3 minutes for PageSpeed. Google keeps your last test result in cache for a few minutes, 
retrying a test in this time window will only return the same values.
* Added disclaimer for PageSpeed tests
* Fixed an issue where modifying Database options would erase configuration
* Fixed an issue where auto-configuration the plugin would erase the PageSpeed history

= 3.1.2 =
* Can now pre-configurate the plugin directly
* Fixed issues with URLs containing queries other than ?ver and ?v
* Added a button to refresh the cache stats without reloading
- Cache stats now better calculated to fixed issue where amount of JS/CSS was overamplified
- Fixed issue with autopurge with WooCommerce where the cache would get deleted each page refresh

= 3.1.1 =
* Fixed issue where URLs with parameters (?XX=) different than ?ver or ?v would not be processed and cause bugs

= 3.1.0 =
* Fixed issues with the "Front-End" optimisations creating bugs
* Changed librairies and removed unused ones
* Fixed bad localizations

= 3.0 =
* New cache system
* CSS/JS minification/combination updated
* Cache stats now with CSS and JS

= 2.1.1 =
* Fixed "is_plugin_active not found" Fatal Error

= 2.1 =
* Cache updated
* Memcached can once again be activated
* New Cloudflare integration, to manage CF cache
* New way of checking your website performances with PageSpeed
* New weekly database optimisation

= 2.0 =
* New design for the plugin
* Front-End and Medias tabs have been entirely modified and fixed
* Lots of bugs have been fixed, performances gain while using our plugins have been increased

= 1.9.1 =
* Small fix with WPCLI

= 1.9 =
* Optimised the CSS/JS minifier ; now minify and combine at the same time with better performances gains
* Fixed bugs when minifying CSS, when remvoing Lazy Load globally and when using Memcached
* Memcached has been added back. Now the SALT used is generated automatically instead of manually
* Removed a few options that did no help with performances and caused issues (e.g. : JPG-ification)
* Updated the webp converter, it should now work more reliably

= 1.8.6 = 
*Removed Memcached for now. Cause site to break.

= 1.8.5 =
* Fixed fatal error when minifying certain types of CSS
* Fixed issues with preloading CSS

= 1.8 =
* Compatibility check added
* Can now deactivate the plugin
* Some corrections to the actions

= 1.7 =
* Fixes to the CSS/JS concatenation, it should now works better
* Minor bugs fixes

= 1.6.5 =
* Can ask for reviews
* Minor bugs fixed

= 1.6 =
* Fixing a problem where non-authorized users could access the options page

= 1.5 =
* Fixing security issue
* Another change to the button to make it easier to understand => now slider
* Some bugs fixed
* More security measures added

= 1.2 = 
* Important bug corrected concerning the lazy loading
* WordPress crash when trying to deactivate lazy loading corrected
* Clarified some button to better show their function

= 1.1 =
* Bug corrected for the HTML Minification, making it unusable
* Made it easier to apply modification in the first tab
* Clarifications added on some elements in the media tab

= 1.0 =
* Plugin created and published
